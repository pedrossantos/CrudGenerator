<UserControl
    x:Class="CrudGenerator.Core.Wpf.Components.ForeignKeysGrid"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="foreignKeysGrid">
    <Grid
        Grid.Row="1"
        MinHeight="300"
        Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Foreign Keys" />
        <DataGrid
            Grid.Row="1"
            MaxHeight="300"
            AutoGenerateColumns="False"
            IsReadOnly="True"
            ItemsSource="{Binding Path=ForeignKeys, Mode=OneWay, ElementName=foreignKeysGrid, UpdateSourceTrigger=PropertyChanged}">
            <DataGrid.Columns>
                <DataGridTextColumn
                    Binding="{Binding Path=ReferencedTable, Mode=OneWay}"
                    Header="Referenced Table"
                    IsReadOnly="True" />

                <DataGridTemplateColumn Header="Columns" IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DataGrid
                                AutoGenerateColumns="False"
                                HeadersVisibility="None"
                                IsReadOnly="True"
                                ItemsSource="{Binding Path=ForeignKeyValueList, Mode=OneWay}">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Header="Foreign Columns">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <DataGrid
                                                    AutoGenerateColumns="False"
                                                    IsReadOnly="True"
                                                    ItemsSource="{Binding Path=ForeignColunmnsToReferencedColumns}">
                                                    <DataGrid.Columns>
                                                        <DataGridTextColumn Binding="{Binding Path=ForeignColumn, Mode=OneWay}" Header="Foreign Column" />
                                                        <DataGridTextColumn Binding="{Binding Path=ReferencedColumn, Mode=OneWay}" Header="Referenced Column" />
                                                        <DataGridCheckBoxColumn Binding="{Binding Path=IsPrimaryKey, Mode=OneWay}" Header="Is Primary Key" />
                                                    </DataGrid.Columns>
                                                </DataGrid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
